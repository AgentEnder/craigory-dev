import{j as e,r as p,i as T,o as M}from"../chunks/chunk-D5HdQM_v.js";/* empty css                      */import{L as v,n as N}from"../chunks/chunk-BjVEBXCY.js";import{I as k}from"../chunks/chunk-BffPLrkb.js";import"../chunks/chunk-CBikE94T.js";/* empty css                      */import"../chunks/chunk-qNf8tQrI.js";function C({reactionTimes:s}){if(s.length===0)return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Response Times"}),e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No response times to display"})]});const c=s.reduce((m,u)=>m+u,0)/s.length,o=[...s].sort((m,u)=>m-u),i=Math.floor(.95*o.length),n=o[i],r=Math.min(...s),t=Math.max(...s),a=s.map((m,u)=>({x:u,xLabel:`Response ${u+1}`,values:{reactionTime:m,mean:c,p95:n},metadata:{fastest:r===m?"Yes":"No",slowest:t===m?"Yes":"No"}})),f=[{key:"reactionTime",label:"Response Time",color:"#10b981",strokeWidth:2,pointRadius:3,unit:"ms"},{key:"mean",label:"Mean",color:"#3b82f6",strokeWidth:2,strokeDasharray:"5,5",pointRadius:0,unit:"ms"},{key:"p95",label:"95th Percentile",color:"#ef4444",strokeWidth:2,strokeDasharray:"3,3",pointRadius:0,unit:"ms"}],d=t-r,y=Math.max(0,r-d*.1),j=t+d*.1;return e.jsx(k,{data:a,lines:f,title:"Response Times",subtitle:"Individual response times with statistical benchmarks",yAxisLabel:"Time (ms)",xAxisLabel:"Response Number",yRange:{min:y,max:j},height:350,interpretation:"Each point shows your reaction time for a correct response. The dashed lines show your average (mean) and 95th percentile times for reference. Consistent times indicate steady attention, while high variability may suggest attention fluctuations."})}function A({timeline:s}){const c=n=>{const r=Math.floor(n/1e3),t=Math.floor(r/60),a=r%60;return`${t}:${a.toString().padStart(2,"0")}`},o=n=>{const r=n.color==="blue"?"text-blue-500":"text-red-500";return e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 ${r}`,children:n.type==="circle"?"●":"■"})},i={};return s.forEach(n=>{const r=Math.floor(n.timestamp/3e4)*30,t=c(r*1e3);i[t]||(i[t]=[]),i[t].push(n)}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Assessment Timeline"}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([n,r])=>e.jsxs("div",{className:"border-l-2 border-gray-200 pl-4",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:n}),e.jsx("div",{className:"space-y-1",children:r.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"text-gray-400 font-mono w-12 text-xs",children:c(t.timestamp)}),t.type==="shape"?e.jsxs("div",{className:"flex items-center gap-2",children:[o(t.data.shape),e.jsxs("span",{className:"text-gray-600",children:[t.data.shape.color," ",t.data.shape.type]}),t.data.shouldMatch&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Should Match"}),t.data.wasMissed&&e.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded font-medium",children:"Miss"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 flex items-center justify-center",children:"⏎"}),e.jsxs("span",{className:`font-medium ${t.data.correct?"text-green-600":"text-red-600"}`,children:[t.data.correct?"✓ Correct":"✗ Incorrect"," ","Response"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(t.data.reactionTime),"ms)"]})]})]},`${t.timestamp}-${a}`))})]},n))})})]})}function D({results:s}){const c=a=>{const f=Math.floor(a/60),d=a%60;return`${f}:${d.toString().padStart(2,"0")}`},o=a=>`${Math.round(a)}ms`,i=a=>a>=90?"text-green-600":a>=75?"text-yellow-600":"text-red-600",n=a=>a<10?"Very Low":a<25?"Low":a<50?"Moderate":a<75?"High":"Very High",r=a=>a<25?"text-green-600":a<50?"text-yellow-600":"text-red-600",t=s.duration<300;return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:[t?"Practice Session":"Assessment"," Results"]}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Duration: ",c(s.duration)]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Accuracy Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Overall Accuracy:"}),e.jsxs("span",{className:`text-2xl font-bold ${i(s.accuracy)}`,children:[s.accuracy.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Correct Responses:"}),e.jsx("span",{className:"font-medium text-green-600",children:s.correctResponses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Incorrect Responses:"}),e.jsx("span",{className:"font-medium text-red-600",children:s.incorrectResponses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Missed Responses:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:s.missedResponses})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total Shapes:"}),e.jsx("span",{className:"font-medium",children:s.totalShapes})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Reaction Time"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Average:"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:o(s.averageReactionTime)})]}),s.reactionTimes.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fastest:"}),e.jsx("span",{className:"font-medium text-green-600",children:o(Math.min(...s.reactionTimes))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Slowest:"}),e.jsx("span",{className:"font-medium text-red-600",children:o(Math.max(...s.reactionTimes))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Responses:"}),e.jsx("span",{className:"font-medium",children:s.reactionTimes.length})]})]})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(C,{reactionTimes:s.reactionTimes})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Movement Analysis"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-gray-700",children:"Movement Level:"}),e.jsx("span",{className:`text-xl font-bold ${r(s.movementScore)}`,children:n(s.movementScore)})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Based on webcam analysis during the assessment. Lower movement typically indicates better sustained attention."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-2",children:["Movement Score: ",s.movementScore.toFixed(1)]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${s.movementScore<25?"bg-green-500":s.movementScore<50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(100,s.movementScore)}%`}})})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(A,{timeline:s.timeline})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Performance Summary"}),e.jsxs("div",{className:"prose text-gray-700",children:[e.jsxs("p",{children:[t?"In this practice session":"During the assessment",", you responded to ",e.jsx("strong",{children:s.totalShapes})," shapes over"," ",e.jsx("strong",{children:c(s.duration)}),"."]}),e.jsxs("p",{children:["Your accuracy was"," ",e.jsxs("strong",{className:i(s.accuracy),children:[s.accuracy.toFixed(1),"%"]}),", with an average reaction time of"," ",e.jsx("strong",{children:o(s.averageReactionTime)}),"."]}),e.jsxs("p",{children:["Movement analysis indicates"," ",e.jsx("strong",{className:r(s.movementScore),children:n(s.movementScore).toLowerCase()})," ","levels of physical movement during the test."]})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-yellow-800 text-sm",children:[e.jsx("strong",{children:"Important:"})," This is a simulation for educational purposes only. These results should not be used for clinical diagnosis or medical decisions. Consult a healthcare professional for proper ADHD assessment."]})}),e.jsxs("div",{className:"text-center space-x-4",children:[e.jsx(v,{href:"/results",className:"bg-gray-600 text-white py-3 px-8 rounded-lg hover:bg-gray-700 transition-colors font-medium inline-block no-underline",children:"Back to Results"}),e.jsx(v,{href:"/",className:"bg-blue-600 text-white py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors font-medium inline-block no-underline",children:"Return to Home"})]})]})}function P(){const[s,c]=p.useState(null),[o,i]=p.useState(!1),[n,r]=p.useState(""),[t,a]=p.useState([]),[f,d]=p.useState(!1),[y,j]=p.useState(!1);p.useEffect(()=>{const x=new URLSearchParams(window.location.search).get("id");if(x){const b=JSON.parse(localStorage.getItem("qbcheck-saved-runs")||"[]").find(R=>R.id===x);if(b){c(b.results),r(b.personName||""),j(!0);return}}const h=sessionStorage.getItem("qbcheck-results");if(h)try{const g=JSON.parse(h);c(g)}catch(g){console.error("Error parsing results:",g),N("/")}else N("/")},[]);const m=()=>{const l=JSON.parse(localStorage.getItem("qbcheck-saved-runs")||"[]");return[...new Set(l.map(h=>h.personName).filter(Boolean))]},u=l=>{if(r(l),l.trim()){const h=m().filter(g=>g.toLowerCase().includes(l.toLowerCase()));a(h),d(h.length>0)}else d(!1)},w=l=>{r(l),d(!1)},S=()=>{if(!s)return;const l=JSON.parse(localStorage.getItem("qbcheck-saved-runs")||"[]"),x={id:crypto.randomUUID(),results:s,personName:n.trim()||void 0,savedAt:new Date().toISOString(),completedAt:new Date().toISOString()};l.push(x),localStorage.setItem("qbcheck-saved-runs",JSON.stringify(l));const h=`${window.location.pathname}?id=${x.id}`;window.history.replaceState(null,"",h),j(!0),i(!1),sessionStorage.removeItem("qbcheck-results")};return s?e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(v,{href:"/results",className:"text-blue-600 hover:text-blue-800 font-medium no-underline",children:"← All Results"}),e.jsx(v,{href:"/",className:"text-gray-600 hover:text-gray-800 no-underline",children:"Home"})]}),!y&&e.jsx("button",{onClick:()=>i(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Save Run"}),y&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Saved"]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Save Assessment Run"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"person-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Person Name (Optional)"}),e.jsx("input",{id:"person-name",type:"text",value:n,onChange:l=>u(l.target.value),onFocus:()=>{if(n.trim()){const l=m();a(l),d(l.length>0)}},onBlur:()=>{setTimeout(()=>d(!1),200)},placeholder:"Enter name or leave blank",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),f&&t.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg z-10 max-h-40 overflow-y-auto",children:t.map((l,x)=>e.jsx("button",{onClick:()=>w(l),className:"w-full text-left px-3 py-2 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",children:l},x))})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This will save the run to your browser's local storage for future viewing."})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:S,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Save"})]})]})})}),e.jsx(D,{results:s})]}):e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-xl text-gray-600",children:"Loading results..."})})})}const I=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"})),_={serverOnlyHooks:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:M}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/results/view/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:I}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:T}}};export{_ as configValuesSerialized};
